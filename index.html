<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Tycoon | FIX</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        
        body { background: #0d1117; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }
        
        /* √úst Bilgi */
        #top-stats { display: flex; justify-content: space-between; width: 90%; margin-top: 20px; gap: 10px; }
        .stat-card { flex: 1; background: rgba(25, 31, 45, 0.8); border: 1px solid #00f2ff; border-radius: 15px; padding: 10px; text-align: center; box-shadow: 0 0 10px rgba(0,242,255,0.2); }
        .stat-card.purple { border-color: #7000ff; }
        .stat-label { font-size: 9px; color: #8b949e; display: block; margin-bottom: 3px; font-weight: bold; }
        .stat-value { font-family: 'Orbitron'; font-size: 13px; color: #fff; }

        /* Ana Alan */
        #main-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
        #score-display { font-family: 'Orbitron'; font-size: 40px; font-weight: bold; margin-bottom: 20px; text-shadow: 0 0 15px #00f2ff; }
        #score-display span { color: #00f2ff; font-size: 18px; }

        #ai-hub {
            width: 170px; height: 170px; border-radius: 50%;
            background: radial-gradient(circle, #1a103d 0%, #0d1117 100%);
            border: 3px solid #7000ff; display: flex; align-items: center; justify-content: center;
            font-size: 80px; cursor: pointer; position: relative; box-shadow: 0 0 30px rgba(112, 0, 255, 0.4);
            transition: transform 0.05s;
        }
        #ai-hub:active { transform: scale(0.92); }

        /* Alt Kartlar (Yatay Kaydƒ±rma) */
        #bottom-scroll { width: 100%; overflow-x: auto; display: flex; gap: 15px; padding: 20px; background: rgba(13, 17, 23, 0.9); border-top: 1px solid #1a2236; }
        .item-card { min-width: 130px; background: #1c2128; border-radius: 15px; padding: 12px; border: 1px solid #30363d; text-align: center; position: relative; }
        .item-card img { width: 45px; height: 45px; margin-bottom: 8px; filter: drop-shadow(0 0 5px #00f2ff); }
        .item-name { font-size: 11px; font-weight: bold; display: block; margin-bottom: 5px; color: #fff; }
        
        .buy-btn { 
            background: #00f2ff; color: #000; border: none; width: 100%; 
            padding: 8px; border-radius: 8px; font-size: 10px; font-weight: bold; cursor: pointer;
        }
        .buy-btn:disabled { background: #334155; color: #64748b; cursor: not-allowed; }

        #navbar { width: 100%; background: #0d1117; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #1a2236; }
        .nav-link { font-size: 10px; color: #8b949e; text-align: center; }
        .nav-link.active { color: #00f2ff; font-weight: bold; }
    </style>
</head>
<body>

    <div id="top-stats">
        <div class="stat-card">
            <span class="stat-label">‚ö° TIK G√úC√ú</span>
            <span class="stat-value" id="tap-val">+1</span>
        </div>
        <div class="stat-card purple">
            <span class="stat-label">‚öôÔ∏è SAATLƒ∞K KAZAN√á</span>
            <span class="stat-value" id="pps-val">0/s</span>
        </div>
    </div>

    <div id="main-area">
        <div id="score-display"><span id="score">0</span> <span>MB</span></div>
        <div id="ai-hub" onclick="handleTap(event)">üß†</div>
    </div>

    <div id="bottom-scroll" id="card-container">
        </div>

    <div id="navbar">
        <div class="nav-link active">üè† ANA EKRAN</div>
        <div class="nav-link">üõ† MARKET</div>
        <div class="nav-link">üéÅ G√ñREVLER</div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // DEƒûƒ∞≈ûKENLER (Veri kaybƒ±nƒ± √∂nlemek i√ßin yeni keyler)
        let score = parseFloat(localStorage.getItem('v3_score')) || 0;
        let tap = parseInt(localStorage.getItem('v3_tap')) || 1;
        let passive = parseFloat(localStorage.getItem('v3_pas')) || 0;

        const cards = [
            { id: 1, name: "GPU V1", price: 100, bonus: 2, type: 'tap', img: "https://cdn-icons-png.flaticon.com/512/3660/3660007.png" },
            { id: 2, name: "SUNUCU", price: 500, bonus: 10, type: 'pas', img: "https://cdn-icons-png.flaticon.com/512/3067/3067866.png" },
            { id: 3, name: "KUANTUM", price: 2000, bonus: 50, type: 'pas', img: "https://cdn-icons-png.flaticon.com/512/5777/5777995.png" }
        ];

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(score).toLocaleString();
            document.getElementById('tap-val').innerText = "+" + tap;
            document.getElementById('pps-val').innerText = Math.floor(passive * 10).toLocaleString() + "/s";
            renderCards();
        }

        function renderCards() {
            const container = document.getElementById('bottom-scroll');
            container.innerHTML = ''; // Temizle ve yeniden √ßiz
            
            cards.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'item-card';
                const canBuy = score >= card.price;
                
                cardDiv.innerHTML = `
                    <img src="${card.img}">
                    <span class="item-name">${card.name}</span>
                    <button class="buy-btn" ${canBuy ? '' : 'disabled'} onclick="buyCard(${card.id})">
                        ${card.price} MB
                    </button>
                `;
                container.appendChild(cardDiv);
            });
        }

        function handleTap(e) {
            score += tap;
            tg.HapticFeedback.impactOccurred('medium');
            updateUI();
            save();
        }

        function buyCard(id) {
            const card = cards.find(c => c.id === id);
            if (score >= card.price) {
                score -= card.price;
                if (card.type === 'tap') {
                    tap += card.bonus;
                } else {
                    passive += (card.bonus / 10);
                }
                tg.HapticFeedback.notificationOccurred('success');
                updateUI();
                save();
            } else {
                tg.showAlert("Yetersiz MB!");
            }
        }

        function save() {
            localStorage.setItem('v3_score', score);
            localStorage.setItem('v3_tap', tap);
            localStorage.setItem('v3_pas', passive);
        }

        // Pasif Kazan√ß D√∂ng√ºs√º
        setInterval(() => {
            if (passive > 0) {
                score += passive;
                updateUI();
            }
        }, 1000);

        updateUI();
    </script>
</body>
</html>
