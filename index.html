<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Tycoon Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        body { background: #05070a; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; user-select: none; }
        
        /* √úst Panel */
        #header { width: 90%; display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #1a2236; }
        .stat-item { text-align: center; background: #0f172a; padding: 5px 15px; border-radius: 10px; border: 1px solid #7000ff; }
        .stat-label { font-size: 9px; color: #5c6b89; display: block; }
        .stat-val { font-family: 'Orbitron', sans-serif; font-size: 12px; color: #00f2ff; }

        /* Skor Alanƒ± */
        #score-container { margin-top: 30px; text-align: center; }
        #score { font-family: 'Orbitron', sans-serif; font-size: 45px; font-weight: bold; text-shadow: 0 0 20px #00f2ff; }
        
        /* Ana Buton */
        #ai-hub { position: relative; width: 200px; height: 200px; margin-top: 30px; cursor: pointer; transition: transform 0.1s; }
        #ai-hub:active { transform: scale(0.92); }
        #ai-hub img { width: 100%; filter: drop-shadow(0 0 20px #7000ff); }

        /* Enerji Barƒ± */
        #energy-box { width: 80%; margin-top: 30px; }
        #energy-bar { width: 100%; height: 12px; background: #1a2236; border-radius: 6px; overflow: hidden; border: 1px solid #334155; }
        #energy-fill { width: 100%; height: 100%; background: linear-gradient(90deg, #00f2ff, #7000ff); transition: width 0.2s; }

        /* Market Paneli */
        #shop { position: fixed; bottom: 70px; width: 100%; background: #0f172a; border-radius: 20px 20px 0 0; border-top: 2px solid #7000ff; padding: 15px 0; display: none; max-height: 50vh; overflow-y: auto; }
        .upgrade-item { background: #1e293b; margin: 10px 20px; padding: 12px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; }
        .buy-btn { background: #7000ff; color: white; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .buy-btn:disabled { background: #334155; color: #64748b; }

        /* Alt Men√º */
        #nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #05070a; border-top: 1px solid #1a2236; padding: 15px 0; }
        .nav-item { flex: 1; text-align: center; font-size: 11px; color: #64748b; cursor: pointer; }
        .nav-item.active { color: #00f2ff; }
    </style>
</head>
<body>

    <div id="header">
        <div class="stat-item"><span class="stat-label">TIK G√úC√ú</span><span class="stat-val" id="tap-val">1</span></div>
        <div class="stat-item"><span class="stat-label">SAATLƒ∞K KAZAN√á</span><span class="stat-val" id="pps-val">0</span></div>
    </div>

    <div id="score-container">
        <div id="score">0</div>
        <div style="font-size: 10px; color: #5c6b89; margin-top: 5px;">TOPLANAN VERƒ∞ (MB)</div>
    </div>

    <div id="ai-hub" onclick="handleTap(event)">
        <div style="font-size: 100px; text-align: center;">‚öôÔ∏è</div>
    </div>

    <div id="energy-box">
        <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;">
            <span>‚ö° ENERJƒ∞</span>
            <span id="energy-text">1000 / 1000</span>
        </div>
        <div id="energy-bar"><div id="energy-fill"></div></div>
    </div>

    <div id="shop">
        <h3 style="text-align: center; margin-top: 0;">VERƒ∞ MERKEZƒ∞</h3>
        <div class="upgrade-item">
            <div><b>RTX 4090</b><br><small>+5 Pasif/sn (500 MB)</small></div>
            <button class="buy-btn" onclick="buyUpgrade('passive', 500, 5)">SATIN AL</button>
        </div>
        <div class="upgrade-item">
            <div><b>S√ºper ƒ∞≈ülemci</b><br><small>+2 Tƒ±k G√ºc√º (200 MB)</small></div>
            <button class="buy-btn" onclick="buyUpgrade('tap', 200, 2)">SATIN AL</button>
        </div>
    </div>

    <div id="nav">
        <div class="nav-item active" onclick="toggleShop(false)">üíª ANA EKRAN</div>
        <div class="nav-item" onclick="toggleShop(true)">üõ† MARKET</div>
        <div class="nav-item" onclick="tg.showAlert('Yakƒ±nda!')">üèÜ Lƒ∞DERLER</div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Deƒüi≈ükenler
        let score = parseFloat(localStorage.getItem('ty_score')) || 0;
        let tapPower = parseInt(localStorage.getItem('ty_tap')) || 1;
        let passiveIncome = parseInt(localStorage.getItem('ty_pas')) || 0;
        let energy = parseInt(localStorage.getItem('ty_ene')) || 1000;
        const maxEnergy = 1000;

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(score).toLocaleString();
            document.getElementById('tap-val').innerText = "+" + tapPower;
            document.getElementById('pps-val').innerText = (passiveIncome * 3600).toLocaleString();
            document.getElementById('energy-text').innerText = energy + " / " + maxEnergy;
            document.getElementById('energy-fill').style.width = (energy / maxEnergy * 100) + "%";
        }

        function handleTap(e) {
            if (energy >= tapPower) {
                score += tapPower;
                energy -= tapPower;
                tg.HapticFeedback.impactOccurred('light');
                save();
                updateUI();
            } else {
                tg.showAlert("Enerji bitti! Dinlenmen lazƒ±m.");
            }
        }

        function toggleShop(show) {
            document.getElementById('shop').style.display = show ? 'block' : 'none';
        }

        function buyUpgrade(type, cost, amount) {
            if (score >= cost) {
                score -= cost;
                if (type === 'tap') tapPower += amount;
                if (type === 'passive') passiveIncome += amount;
                save();
                updateUI();
                tg.showAlert("Y√ºkseltme tamamlandƒ±!");
            } else {
                tg.showAlert("Yetersiz veri!");
            }
        }

        function save() {
            localStorage.setItem('ty_score', score);
            localStorage.setItem('ty_tap', tapPower);
            localStorage.setItem('ty_pas', passiveIncome);
            localStorage.setItem('ty_ene', energy);
        }

        // Pasif Gelir ve Enerji Yenileme (Her saniye)
        setInterval(() => {
            score += (passiveIncome / 10);
            if (energy < maxEnergy) energy += 1;
            updateUI();
            // Her 5 saniyede bir otomatik kaydet
            if (Math.floor(score) % 5 === 0) save();
        }, 100);

        updateUI();
    </script>
</body>
</html>
